<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>iframe tester</title>
    <link rel="stylesheet" href="https://public.codepenassets.com/css/reset-2.0.min.css">


  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Firza Radio Medan</title>

<style>
/* ---------------- GLOBAL ---------------- */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:15px;
  background:linear-gradient(120deg,#ff512f,#dd2476);
  transition:background 2s ease;
}

.radio-player{
  width:100%;
  max-width:420px;       /* lebih kecil */
  background:rgba(255,255,255,0.08);
  border-radius:20px;
  backdrop-filter:blur(15px);
  box-shadow:0 10px 30px rgba(0,0,0,0.4);
  overflow:hidden;
  color:#fff;
}

/* HEADER */
.header{text-align:center;padding:15px}
.header h1{font-size:22px;margin-bottom:3px}
.header p{opacity:.7;font-size:13px}

/* ------------ ALBUM ART + GLOW ---------------- */
.album-wrap{
  width:240px;
  height:240px;
  margin:20px auto 10px;
  position:relative;
}

.cover-glow{
  position:absolute; inset:0;
  border-radius:20px;
  filter:blur(40px);
  opacity:0;
  background:radial-gradient(circle,rgba(255,255,255,0.4),transparent 70%);
  transition:opacity .6s ease, background .6s ease;
}

@keyframes pulseGlow{
  0%{transform:scale(1)}
  50%{transform:scale(1.15)}
  100%{transform:scale(1)}
}
.cover-glow.pulse{animation:pulseGlow 1.6s ease}

/* album art */
.album-art{
  width:100%;height:100%;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 15px 35px rgba(0,0,0,0.5);
  display:flex;justify-content:center;align-items:center;
  background:rgba(0,0,0,0.25);
}

.album-art img{width:100%;height:100%;object-fit:cover;display:none}
.no-cover{font-size:13px;opacity:.7}

/* ------------ TRACK INFO ------------- */
.track-info{text-align:center;padding:0 15px 10px}
#trackTitle{
  font-size:18px;font-weight:600;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
#trackArtist{opacity:.85;font-size:14px;margin-top:3px}
#trackAlbum{opacity:.65;font-size:12px;margin-top:2px}

/* marquee */
.marquee{
  width:100%;overflow:hidden;white-space:nowrap;
}
.marquee span{
  display:inline-block;
  padding-left:100%;
  animation:marq 12s linear infinite;
}
@keyframes marq{
  0%{transform:translateX(0)}
  100%{transform:translateX(-100%)}
}

/* ------------ CONTROLS ------------ */
.controls{padding:12px}

.playback-controls{
  display:flex;
  justify-content:center;
  gap:25px;
  margin-bottom:10px;
}

.control-btn{
  width:50px;height:50px;
  border-radius:50%;
  border:none;
  font-size:22px;
  background:rgba(255,255,255,0.15);
  color:white;
  cursor:pointer;
  transition:.3s;
}
.control-btn:hover{background:rgba(255,255,255,0.25)}
.play-btn{width:68px;height:68px;font-size:30px}

/* VOLUME */
.volume-controls{
  display:flex;
  align-items:center;
  justify-content:center;   /* ‚ûú BAR DI TENGAH */
  gap:15px;
}

.volume-slider{
  width:65%;
  -webkit-appearance:none;
  height:6px;
  border-radius:5px;
  background:rgba(255,255,255,0.3);
}
.volume-slider::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:18px;height:18px;
  border-radius:50%;
  background:white;
}

.status{text-align:center;font-size:13px;opacity:.75;margin:10px 0}
.footer{text-align:center;font-size:12px;opacity:.45;padding:10px}
</style>
</head>

<body>
<div class="radio-player">
  <div class="header">
    <h1>Firza Radio Medan</h1>
    <p>More then the other</p>
  </div>

  <div class="album-wrap">
    <div class="cover-glow" id="coverGlow"></div>
    <div class="album-art">
      <div class="no-cover" id="noCover">Memuat cover...</div>
      <img id="coverImage" />
    </div>
  </div>

  <div class="track-info">
    <div id="trackTitle">Radio</div>
    <div id="trackArtist">Memuat...</div>
    <div id="trackAlbum">Firza & Kiara</div>
  </div>

  <div class="controls">
    <div class="playback-controls">
      <button class="control-btn" id="prevBtn">‚èÆ</button>
      <button class="control-btn play-btn" id="playBtn">‚ñ∂</button>
      <button class="control-btn" id="nextBtn">‚è≠</button>
    </div>

    <div class="volume-controls">
      üîä <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01" value="0.7">
    </div>
  </div>

  <div class="status" id="statusText">Siap diputar</div>
  <div class="footer">¬© Firza Radio 2026</div>
</div>

<script>
// ----- CONFIG -----
const streamUrl = "https://stream.zeno.fm/49c2uvzd4reuv";
const apiUrl = "https://zenoplay.zenomedia.com/api/zenofm/nowplaying/49c2uvzd4reuv";
const defaultCover = "https://www.radioplug.co.uk/img/channel/07-07-2019-06-09-53.jpg";

// ----- ELEMENTS -----
const coverImage = document.getElementById("coverImage");
const noCover = document.getElementById("noCover");
const trackTitle = document.getElementById("trackTitle");
const trackArtist = document.getElementById("trackArtist");
const coverGlow = document.getElementById("coverGlow");
const playBtn = document.getElementById("playBtn");
const volumeSlider = document.getElementById("volumeSlider");
const statusText = document.getElementById("statusText");

// ----- AUDIO -----
const audio = new Audio(streamUrl);
audio.volume = volumeSlider.value;
let isPlaying = false;

// ----- CORS FIX COVER FETCH -----
async function fetchCover(artist, title){
  const q = encodeURIComponent(`${artist} ${title}`);
  const url = `https://api.allorigins.win/raw?url=${encodeURIComponent("https://itunes.apple.com/search?term="+q+"&limit=1")}`;

  try{
    const res = await fetch(url);
    const json = await res.json();
    if(json.results?.length > 0){
      return json.results[0].artworkUrl100.replace("100x100","600x600");
    }
  }catch(e){}

  return defaultCover;
}

// ----- TRACK UPDATE -----
async function updateTrack(){
  try{
    const res = await fetch(apiUrl + "?r=" + Math.random());
    const data = await res.json();

    let raw = data.title || "";
    let artist = "Tidak diketahui";
    let title = raw;

    if(raw.includes(" - ")){
      const parts = raw.split(" - ");
      artist = parts[0].trim();
      title = parts[1].trim();
    }

    // apply text
    if(title.length > 22){
      trackTitle.innerHTML = `<div class="marquee"><span>${title}</span></div>`;
    } else {
      trackTitle.textContent = title;
    }
    trackArtist.textContent = artist;

    // cover
    const coverUrl = await fetchCover(artist,title);

    coverImage.onload = ()=>{
      noCover.style.display = "none";
      coverImage.style.display = "block";
      applyGlow();
    };
    coverImage.onerror = ()=>{
      coverImage.src = defaultCover;
      noCover.style.display = "block";
    };
    coverImage.src = coverUrl;

    // pulse animation
    coverGlow.classList.add("pulse");
    setTimeout(()=>coverGlow.classList.remove("pulse"),1500);

  }catch(e){}
}

// ----- Glow & average color -----
function applyGlow(){
  const img = coverImage;
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");
  canvas.width = img.naturalWidth;
  canvas.height = img.naturalHeight;
  ctx.drawImage(img,0,0);

  const data = ctx.getImageData(0,0,canvas.width,canvas.height).data;
  let r=0,g=0,b=0,count=0;

  for(let i=0;i<data.length;i+=50){
    r += data[i]; g += data[i+1]; b += data[i+2]; count++;
  }

  r=Math.floor(r/count); g=Math.floor(g/count); b=Math.floor(b/count);

  coverGlow.style.background = `radial-gradient(circle, rgba(${r},${g},${b},0.7), transparent 70%)`;
  coverGlow.style.opacity = 1;
}

// ----- Background auto-change every 20‚Äì30 seconds -----
const bgSet = [
  ["#ff512f","#dd2476"],
  ["#1a2a6c","#b21f1f","#fdbb2d"],
  ["#00c6ff","#0072ff"],
  ["#7f00ff","#e100ff"],
  ["#ff9966","#ff5e62"]
];

function changeBG(){
  const bg = bgSet[Math.floor(Math.random()*bgSet.length)];
  document.body.style.background = `linear-gradient(120deg, ${bg.join(",")})`;
}

setInterval(changeBG, 25000);   // ~25 detik
changeBG();

// ----- Controls -----
playBtn.onclick = ()=>{
  if(!isPlaying){
    audio.play();
    isPlaying = true;
    playBtn.textContent = "‚è∏";
    statusText.textContent = "Memutar...";
  }else{
    audio.pause();
    isPlaying = false;
    playBtn.textContent = "‚ñ∂";
    statusText.textContent = "Dijeda";
  }
};

volumeSlider.oninput = ()=> audio.volume = volumeSlider.value;

// ----- Start -----
updateTrack();
setInterval(updateTrack,10000);
</script>

</body>
</html>
    
  </body>
  
</html>
